<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>LivenJet | Sovereign OS</title>
    <style>
        /* --- CORE STYLES --- */
        :root { --gold: #FFD700; --dark: #050505; --accent: #FFD700; --green: #00ff00; --red: #ff4444; --ice: #00f2ff; --purple: #d000ff; }
        
        /* SCROLLBAR HIDING */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; touch-action: manipulation; }

        body { 
            background-color: #050505; 
            color: var(--accent); 
            font-family: 'Segoe UI', Roboto, sans-serif; 
            text-align: center; 
            margin: 0; 
            overflow: hidden; 
            user-select: none; 
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-image: radial-gradient(#151515 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* --- THE TERMINAL CONTAINER --- */
        #device-frame {
            position: relative;
            width: 100%;
            height: 100%;
            background: #000;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* PC MODE: Floating Terminal */
        @media (min-width: 768px) {
            #device-frame {
                width: 400px; 
                height: 85vh; 
                max-height: 900px;
                border-radius: 35px;
                border: 6px solid #222;
                box-shadow: 0 30px 80px rgba(0,0,0,0.8), 0 0 20px var(--accent);
            }
        }

        /* --- VISUAL FX --- */
        .scanlines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0) 50%, rgba(0,0,0,0.05) 50%); background-size: 100% 3px; pointer-events: none; z-index: 9998; opacity: 0.6; }
        
        /* --- SINGULARITY MODE --- */
        #device-frame.singularity { --accent: var(--purple); --green: var(--ice); border-color: var(--purple); box-shadow: 0 0 50px var(--purple); }
        
        /* --- LOCK SCREEN --- */
        #launchpad { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.5s; }
        .pin-display { font-size: 30px; letter-spacing: 15px; color: var(--accent); margin-bottom: 40px; height: 40px; font-family: monospace; text-shadow: 0 0 15px var(--accent); }
        .pin-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 240px; }
        .pin-btn { width: 65px; height: 65px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 50%; color: #fff; font-size: 22px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.1s; }
        .pin-btn:active { background: var(--accent); color: #000; transform: scale(0.95); }
        
        /* --- HEADER --- */
        .header-bar { position: absolute; top: 0; left: 0; width: 100%; height: 100px; z-index: 2000; padding-top: max(20px, env(safe-area-inset-top)); background: linear-gradient(to bottom, #000 80%, transparent); display: flex; justify-content: space-between; align-items: flex-start; padding-left: 20px; padding-right: 20px; box-sizing: border-box; }
        .icon-btn { width: 40px; height: 40px; background: #1a1a1a; border: 1px solid #333; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; color: #fff; }
        .avatar-box { font-weight: 900; background: var(--accent); color: #000; }
        
        .ticker-wrap { width: 100%; position: absolute; top: 70px; z-index: 1999; font-family: monospace; font-size: 10px; color: #666; pointer-events: none; text-shadow: 0 2px 2px #000; }

        /* --- NEURAL CORE --- */
        .neural-core { width: 80px; height: 80px; background: radial-gradient(circle, var(--accent) 0%, transparent 70%); border-radius: 50%; margin: 110px auto 10px; position: relative; animation: core-pulse 3s infinite; cursor: pointer; transition: 0.5s; z-index: 500; flex-shrink: 0; }
        .core-inner { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40%; height: 40%; background: #fff; border-radius: 50%; box-shadow: 0 0 20px var(--accent); }
        @keyframes core-pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.1); opacity: 1; } }

        /* --- APP CONTENT --- */
        #app-interface { display: none; opacity: 0; transition: opacity 0.5s; padding-bottom: 140px; overflow-y: auto; height: 100%; flex: 1; -webkit-overflow-scrolling: touch; padding-left:15px; padding-right:15px; box-sizing: border-box; }
        .pillar { display: none; animation: slideIn 0.3s ease; }
        .active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }
        
        /* --- COMPONENTS --- */
        .intel-card { background: rgba(20,20,20,0.9); border: 1px solid #333; border-bottom: 2px solid var(--accent); border-radius: 18px; padding: 20px; margin: 15px auto; text-align: left; position: relative; backdrop-filter: blur(5px); }
        .btn-full { background: var(--accent); color: #000; border: none; padding: 14px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 14px; }
        .btn-outline { background: transparent; border: 1px solid #333; color: #fff; padding: 12px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .input-group { margin-bottom: 15px; text-align: left; }
        .app-input { width: 100%; background: #111; border: 1px solid #333; color: #fff; padding: 14px; border-radius: 10px; box-sizing: border-box; font-size: 16px; outline: none; }
        
        .action-grid { display: flex; justify-content: space-between; gap: 8px; margin-top: 20px; }
        .action-btn { flex: 1; background: #151515; border-radius: 12px; padding: 15px 5px; cursor: pointer; border: 1px solid #222; transition: 0.1s; }
        .action-btn:active { background: #333; transform: scale(0.95); }
        
        /* --- DOCK --- */
        .dock { 
            position: absolute; 
            bottom: 30px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 85%; 
            background: rgba(15,15,15,0.95); 
            border: 1px solid #333; 
            border-radius: 30px; 
            display: flex; 
            justify-content: space-around; 
            padding: 18px 0; 
            z-index: 1000; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .dock-item { font-size: 24px; opacity: 0.4; transition: 0.2s; cursor: pointer; }
        .active-icon { opacity: 1; color: var(--accent); transform: translateY(-3px); text-shadow: 0 0 15px var(--accent); }

        /* --- MODULES --- */
        .ledger-box { margin-top: 20px; max-height: 200px; overflow-y: auto; }
        .tx-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #222; font-size: 13px; }
        
        .venture-card { background: #151515; border: 1px solid #333; padding: 15px; border-radius: 12px; margin-bottom: 10px; text-align: left; }
        .venture-bar { height: 4px; background: var(--green); width: 0%; border-radius: 2px; transition: width 1s linear; }
        
        .asset-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .asset-item { background: #151515; border: 1px solid #333; border-radius: 12px; padding: 15px; opacity: 0.5; }
        .asset-item.owned { opacity: 1; border-color: var(--gold); box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.1); }

        .grid-monitor { height: 80px; background: #000; border: 1px solid #333; margin-top: 10px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .sine-wave { position: absolute; width: 200%; height: 100%; background: repeating-linear-gradient(90deg, transparent 0, transparent 20px, var(--accent) 20px, var(--accent) 22px); opacity: 0.2; animation: wave 2s linear infinite; }
        @keyframes wave { 0% { transform: translateX(0); } 100% { transform: translateX(-50px); } }

        /* --- MODALS --- */
        .modal-overlay { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 5000; align-items: center; justify-content: center; }
        
        /* CHAT */
        .fab-chat { position: absolute; bottom: 110px; right: 20px; width: 55px; height: 55px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 26px; z-index: 4000; cursor: pointer; box-shadow: 0 0 20px rgba(255,215,0,0.3); color: #000; }
        .chat-card { height: 75vh; display: flex; flex-direction: column; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; text-align: left; background: #000; font-family: monospace; font-size: 12px; }
        .msg-ai { color: var(--accent); margin-bottom: 5px; } .msg-user { color: #fff; text-align: right; margin-bottom: 10px; opacity: 0.7; }

        /* DATA TRANSFER */
        .data-box { background: #111; border: 1px dashed #444; color: var(--green); padding: 10px; font-family: monospace; font-size: 10px; word-break: break-all; margin: 10px 0; max-height: 60px; overflow-y: auto; }
    </style>
</head>
<body>

    <div id="device-frame">
        <div class="scanlines"></div>

        <div class="header-bar" id="header-ui" style="display:none;">
            <div class="icon-btn avatar-box" onclick="toggleModal('passport-overlay')" id="main-avatar">SA</div>
            <div class="icon-btn" onclick="toggleCurrency()">‚Ç¶/$</div>
            <div class="icon-btn" onclick="toggleModal('settings-overlay')">‚öôÔ∏è</div>
        </div>

        <div id="launchpad">
            <h1 style="letter-spacing: 5px; font-size: 24px; margin-bottom: 50px;">LIVENJET</h1>
            <div class="pin-display" id="pin-display">****</div>
            <div class="pin-grid">
                <div class="pin-btn" onclick="enterPin(1)">1</div><div class="pin-btn" onclick="enterPin(2)">2</div><div class="pin-btn" onclick="enterPin(3)">3</div>
                <div class="pin-btn" onclick="enterPin(4)">4</div><div class="pin-btn" onclick="enterPin(5)">5</div><div class="pin-btn" onclick="enterPin(6)">6</div>
                <div class="pin-btn" onclick="enterPin(7)">7</div><div class="pin-btn" onclick="enterPin(8)">8</div><div class="pin-btn" onclick="enterPin(9)">9</div>
                <div class="pin-btn" style="color:var(--red); border-color:var(--red);" onclick="clearPin()">C</div>
                <div class="pin-btn" onclick="enterPin(0)">0</div>
                <div class="pin-btn" style="color:var(--green); border-color:var(--green);" onclick="checkPin()">></div>
            </div>
            <p id="auth-status" style="margin-top: 30px; font-family: monospace; font-size: 10px; color: #666;">SECURE ACCESS v44.0</p>
        </div>

        <div id="app-interface">
            <div class="ticker-wrap">
                <span style="font-weight:bold; color:var(--ice);" id="influence-score">INF: 0%</span> | 
                <span id="system-status">ONLINE</span> | <span id="clock"></span>
            </div>
            
            <div class="neural-core" onclick="handleCoreClick()" id="neural-core"><div class="core-inner"></div></div>
            <div style="font-family: monospace; font-size: 10px; color: #888; height: 20px;" id="ai-msg">IDENTITY VERIFIED.</div>

            <div id="home" class="pillar active">
                <div class="intel-card">
                    <p style="font-size: 10px; color: #666; margin: 0;">LIQUIDITY</p>
                    <h2 style="margin: 5px 0; font-size: 36px; font-family: 'Courier New'; cursor: pointer;" id="wallet-bal">‚Ç¶ 50,000.00</h2>
                    <div class="action-grid">
                        <div class="action-btn" onclick="toggleModal('send-overlay')"><div class="action-icon">üí∏</div><div class="action-text">SEND</div></div>
                        <div class="action-btn" onclick="toggleModal('ventures-overlay')"><div class="action-icon" style="color:var(--ice);">üè¢</div><div class="action-text">BIZ</div></div>
                        <div class="action-btn" onclick="openAssets()"><div class="action-icon" style="color:var(--gold);">üèõÔ∏è</div><div class="action-text">ASSET</div></div>
                        <div class="action-btn" onclick="msg('USSD *991#')"><div class="action-icon">‚ûï</div><div class="action-text">ADD</div></div>
                    </div>
                    <div class="ledger-box" id="ledger-list"></div>
                </div>
            </div>

            <div id="util" class="pillar">
                <div class="intel-card">
                    <h3>GRID COMMAND</h3>
                    <div class="grid-monitor"><div class="sine-wave"></div><div class="grid-status-text" id="grid-text">STABLE</div></div>
                    <div style="margin-top:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                        <button class="btn" style="margin:0; background:#222; font-size:10px;" onclick="buyInfra('solar', 200000)">SOLAR<br>‚Ç¶200k</button>
                        <button class="btn" style="margin:0; background:#222; font-size:10px;" onclick="buyInfra('nuke', 500000)">NUCLEAR<br>‚Ç¶500k</button>
                    </div>
                </div>
            </div>

            <div id="logi" class="pillar">
                <div class="intel-card">
                    <h3>WAR ROOM</h3>
                    <div class="agent-list" id="agent-display"></div>
                    <button class="btn" onclick="toggleModal('agent-overlay')" style="margin-top:10px; font-size:10px;">+ DEPLOY (‚Ç¶50k)</button>
                </div>
                <button class="btn" onclick="openMap()">OPEN NEXUS MAP</button>
            </div>

            <div id="fina" class="pillar">
                <div class="intel-card">
                    <div style="display:flex; justify-content:space-between;"><h3>PORTFOLIO</h3><span style="color:#0f0;">+15%</span></div>
                    <div style="margin-top:15px; border-bottom:1px solid #333; padding-bottom:10px; display:flex; justify-content:space-between; align-items:center;">
                        <div><div style="font-weight:bold;">BTC</div><div style="font-size:10px; color:#666;">$98,400</div></div>
                        <button class="btn" style="width:60px; padding:8px; margin:0;" onclick="pay(5000, 'BTC')">BUY</button>
                    </div>
                    <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center;">
                        <div><div style="font-weight:bold;">LJN</div><div style="font-size:10px; color:var(--accent);" id="ljn-bal">0.00</div></div>
                        <button class="btn" style="width:60px; padding:8px; margin:0;" onclick="startMining()" id="mine-btn">MINE</button>
                    </div>
                </div>
            </div>

            <div class="dock">
                <div id="n-home" class="dock-item active-icon" onclick="nav('home')">ü™ê</div>
                <div id="n-util" class="dock-item" onclick="nav('util')">‚ö°</div>
                <div id="n-logi" class="dock-item" onclick="nav('logi')">‚úàÔ∏è</div>
                <div id="n-fina" class="dock-item" onclick="nav('fina')">üí≥</div>
            </div>
            
            <div class="fab-chat" onclick="toggleModal('chat-overlay')">üí¨</div>
        </div>

        <div id="settings-overlay" class="modal-overlay"><div class="modal-card"><h2>SYSTEM</h2><input type="text" class="app-input" id="set-name" placeholder="Name"><button class="btn-full" onclick="saveSettings()">SAVE PROFILE</button><div style="margin-top:20px; border-top:1px dashed #333; padding-top:10px;"><p style="font-size:10px; color:#888;">DATA TRANSFER</p><button class="btn-outline" onclick="exportData()">EXPORT SAVE CODE</button><input type="text" class="app-input" id="import-code" placeholder="Paste Save Code Here" style="margin-top:5px;"><button class="btn-full" onclick="importData()">IMPORT DATA</button></div><button class="btn-outline" onclick="hardReset()" style="color:red; border-color:red;">FACTORY RESET</button><button class="btn-outline" onclick="toggleModal('settings-overlay')">CLOSE</button></div></div>
        
        <div id="transfer-modal" class="modal-overlay"><div class="modal-card"><h2>SAVE CODE</h2><p style="font-size:10px;">COPY THIS CODE TO SAVE YOUR PROGRESS:</p><div class="data-box" id="export-text"></div><button class="btn-full" onclick="toggleModal('transfer-modal')">CLOSE</button></div></div>

        <div id="ventures-overlay" class="modal-overlay"><div class="modal-card"><h2>BUSINESS</h2><div id="active-ventures"></div><button class="btn-full" onclick="createBusiness()">NEW VENTURE (‚Ç¶100k)</button><button class="btn-outline" onclick="toggleModal('ventures-overlay')">CLOSE</button></div></div>
        <div id="assets-overlay" class="modal-overlay"><div class="modal-card"><h2>ASSETS</h2><div class="asset-grid" id="asset-list"></div><button class="btn-outline" onclick="toggleModal('assets-overlay')">CLOSE</button></div></div>
        <div id="agent-overlay" class="modal-overlay"><div class="modal-card"><h2>DEPLOY</h2><select class="app-input" id="agent-city"><option>Dubai</option><option>London</option><option>Tokyo</option></select><button class="btn-full" onclick="deployAgent()">CONFIRM (‚Ç¶50k)</button><button class="btn-outline" onclick="toggleModal('agent-overlay')">CANCEL</button></div></div>
        <div id="send-overlay" class="modal-overlay"><div class="modal-card"><h2>SEND</h2><input type="number" class="app-input" id="send-amt" placeholder="Amount"><button class="btn-full" onclick="pay(document.getElementById('send-amt').value, 'Transfer')">SEND</button><button class="btn-outline" onclick="toggleModal('send-overlay')">CANCEL</button></div></div>
        <div id="chat-overlay" class="modal-overlay"><div class="modal-card chat-card"><div style="padding:10px; background:#222;">TERMINAL <span onclick="toggleModal('chat-overlay')" style="float:right;">‚úï</span></div><div class="chat-body" id="chat-box"></div><div class="chat-input-area"><input type="text" class="chat-input" id="user-input" placeholder="..."><button class="btn" style="width:auto; margin:0;" onclick="sendMsg()">‚û§</button></div></div></div>
        <div id="passport-overlay" class="modal-overlay"><div class="modal-card"><h2>ID CARD</h2><div style="font-size:40px;">üë§</div><h3 id="pass-name-display">USER</h3><p>LEVEL 5</p><button class="btn-outline" onclick="toggleModal('passport-overlay')">CLOSE</button></div></div>
        <div id="map-overlay" class="modal-overlay"><div class="modal-card"><h2>NEXUS</h2><div class="nexus-map" id="nexus-map"></div><button class="btn-outline" onclick="toggleModal('map-overlay')">CLOSE</button></div></div>

    </div>

    <script>
        // --- DATA ENGINE ---
        let balance=50000, ljnCrypto=0.00, userName="STEVEN", agents=[], ventures=[], transactions=[], ownedAssets={}, influence=0, singularity=false;
        let pin="8820", inputPin="";

        function loadData() {
            if(localStorage.getItem('livenjet_master')) {
                let d = JSON.parse(localStorage.getItem('livenjet_master'));
                balance=d.b; ljnCrypto=d.c; userName=d.u; agents=d.a; ventures=d.v; transactions=d.t; ownedAssets=d.o; influence=d.i; singularity=d.s;
            }
            renderUI();
        }
        function saveData() {
            let data = { b:balance, c:ljnCrypto, u:userName, a:agents, v:ventures, t:transactions, o:ownedAssets, i:influence, s:singularity };
            localStorage.setItem('livenjet_master', JSON.stringify(data));
        }
        function exportData() {
            let data = JSON.stringify({ b:balance, c:ljnCrypto, u:userName, a:agents, v:ventures, t:transactions, o:ownedAssets, i:influence, s:singularity });
            let code = btoa(data); // Encode Base64
            document.getElementById('export-text').innerText = code;
            toggleModal('transfer-modal');
        }
        function importData() {
            try {
                let code = document.getElementById('import-code').value;
                let json = atob(code); // Decode
                let d = JSON.parse(json);
                balance=d.b; ljnCrypto=d.c; userName=d.u; agents=d.a; ventures=d.v; transactions=d.t; ownedAssets=d.o; influence=d.i; singularity=d.s;
                saveData(); renderUI(); msg("DATA RESTORED"); toggleModal('settings-overlay');
            } catch(e) { msg("INVALID CODE"); }
        }
        function hardReset() { if(confirm("WIPE EVERYTHING?")) { localStorage.removeItem('livenjet_master'); location.reload(); } }

        // --- AUTH ---
        function enterPin(n) { if(inputPin.length<4) { inputPin+=n; document.getElementById('pin-display').innerText = inputPin.padEnd(4,'*').replace(/\d/g,'*'); } }
        function clearPin() { inputPin=""; document.getElementById('pin-display').innerText="****"; }
        function checkPin() {
            if(inputPin===pin) {
                document.getElementById('launchpad').style.opacity = 0;
                setTimeout(()=>{ 
                    document.getElementById('launchpad').style.display='none'; 
                    document.getElementById('app-interface').style.display='block';
                    document.getElementById('header-ui').style.display='flex';
                    setTimeout(()=>{document.getElementById('app-interface').style.opacity=1;},100);
                }, 500);
            } else {
                document.getElementById('auth-status').innerText="INVALID PIN";
                document.getElementById('auth-status').style.color="red";
                inputPin=""; document.getElementById('pin-display').innerText="****";
                if(navigator.vibrate) navigator.vibrate(200);
            }
        }

        // --- CORE UI ---
        function renderUI() {
            document.getElementById('wallet-bal').innerText = "‚Ç¶ " + balance.toLocaleString(undefined, {minimumFractionDigits:2});
            document.getElementById('ljn-bal').innerText = ljnCrypto.toFixed(2);
            document.getElementById('pass-name-display').innerText = userName.toUpperCase();
            document.getElementById('main-avatar').innerText = userName.substring(0,2).toUpperCase();
            document.getElementById('influence-score').innerText = "INF: "+influence+"%";
            
            const l = document.getElementById('ledger-list'); l.innerHTML="";
            if(transactions.length===0) l.innerHTML="<div style='color:#444; font-size:10px; margin-top:10px;'>NO DATA</div>";
            else transactions.slice(0,5).forEach(t=>{ l.innerHTML+=`<div class="tx-row"><div class="tx-details"><p class="tx-title">${t.desc}</p></div><div class="tx-amt" style="color:${t.amt>0?'#0f0':'#f44'}">${t.amt>0?'+':''}‚Ç¶${Math.abs(t.amt).toLocaleString()}</div></div>`; });

            updateAgentList(); updateVentureUI();
            if(singularity) document.getElementById('device-frame').classList.add('singularity');
        }

        function nav(id) {
            document.querySelectorAll('.pillar').forEach(p=>p.classList.remove('active'));
            document.querySelectorAll('.dock-item').forEach(d=>d.classList.remove('active-icon'));
            document.getElementById(id).classList.add('active');
            document.getElementById('n-'+id).classList.add('active-icon');
        }

        // --- GAMEPLAY ---
        function pay(amt, desc) {
            if(balance>=amt) {
                balance-=amt; transactions.unshift({desc:desc, amt:-amt}); saveData(); renderUI();
                msg("SUCCESS"); 
            } else msg("FUNDS?");
        }
        function startMining() {
            const b = document.getElementById('mine-btn'); b.innerText="...";
            setTimeout(()=>{ ljnCrypto+=0.5; b.innerText="MINE"; saveData(); renderUI(); msg("MINED 0.5"); }, 1000);
        }
        
        function createBusiness() {
            if(balance>=100000) {
                balance-=100000; ventures.push({name:"STARTUP", rev:0, prog:0, lvl:1});
                saveData(); renderUI(); toggleModal('ventures-overlay');
            } else msg("NEED ‚Ç¶100k");
        }
        function updateVentureUI() {
            const c = document.getElementById('active-ventures'); c.innerHTML="";
            if(ventures.length===0) c.innerHTML="<p style='color:#666; font-size:10px;'>NONE</p>";
            ventures.forEach((v,i)=>{
                c.innerHTML+=`<div class="venture-card"><div><span style="color:#fff;">${v.name}</span> <span style="color:#0f0;">‚Ç¶${v.rev.toLocaleString()}</span></div><div style="height:4px; background:#333; margin:5px 0;"><div style="height:100%; width:${v.prog}%; background:#0f0;"></div></div><button class="btn" style="padding:5px; font-size:10px;" onclick="collect(${i})">COLLECT</button></div>`;
            });
        }
        function collect(i) {
            if(ventures[i].rev > 0) { balance+=ventures[i].rev; ventures[i].rev=0; saveData(); renderUI(); }
        }
        
        function deployAgent() {
            let c = document.getElementById('agent-city').value;
            if(balance>=50000) {
                balance-=50000; agents.push({city:c, status:'active'}); influence+=5;
                saveData(); renderUI(); toggleModal('agent-overlay');
            } else msg("FUNDS?");
        }
        function updateAgentList() {
            const l = document.getElementById('agent-display'); l.innerHTML="";
            if(agents.length===0) l.innerHTML="<div style='color:#666; font-size:10px; text-align:center;'>NO AGENTS</div>";
            else agents.forEach(a=>{ l.innerHTML+=`<div style="background:#111; padding:10px; margin-bottom:5px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;"><span>${a.city}</span><span style="color:#0f0; font-size:10px;">ACTIVE</span></div>`; });
        }

        function openAssets() {
            toggleModal('assets-overlay'); const l = document.getElementById('asset-list'); l.innerHTML="";
            const db = [{id:'island',n:'ISLAND',c:100000000},{id:'jet',n:'JET',c:50000000}];
            db.forEach(a=>{
                let btn = ownedAssets[a.id] ? "<span style='color:#0f0; font-size:10px;'>OWNED</span>" : `<button class="btn" style="margin:0; padding:5px; font-size:9px;" onclick="buyAsset('${a.id}',${a.c})">BUY</button>`;
                l.innerHTML+=`<div class="asset-item"><div style="font-size:20px;">üèõÔ∏è</div><div class="asset-name">${a.n}</div>${btn}</div>`;
            });
        }
        function buyAsset(id,c) { if(balance>=c){balance-=c; ownedAssets[id]=true; influence+=20; saveData(); renderUI(); openAssets();} else msg("FUNDS?"); }
        
        function buyInfra(t,c){ if(balance>=c){balance-=c; infra[t]++; saveData(); renderUI(); msg("BOUGHT "+t.toUpperCase());} else msg("FUNDS?"); }

        // --- SYSTEM LOOPS ---
        setInterval(()=>{
            ventures.forEach(v=>{
                if(v.prog < 100) v.prog+=10;
                else { v.rev += 2000*v.lvl; v.prog=0; updateVentureUI(); }
            });
            if(agents.length>0) { balance+=agents.length*1000; renderUI(); }
        }, 2000);

        // --- UTILS ---
        function buzz(d){ if(navigator.vibrate) navigator.vibrate(d); }
        function toggleModal(id){ buzz(20); const e=document.getElementById(id); e.style.display=(e.style.display==='flex')?'none':'flex'; }
        function msg(t){ const a=document.getElementById('ai-msg'); a.innerText=t; a.style.color="#fff"; setTimeout(()=>{a.style.color="#888"},2000); }
        function authenticate(){ document.getElementById('auth-status').innerText="SCANNING..."; setTimeout(()=>{document.getElementById('launchpad').style.display='none'; document.getElementById('app-interface').style.display='block'; document.getElementById('header-ui').style.display='flex'; setTimeout(()=>{document.getElementById('app-interface').style.opacity='1';},50);},800); }
        function toggleCurrency(){ currency=currency==="NGN"?"USD":"NGN"; renderUI(); }
        function saveSettings(){ userName=document.getElementById('set-name').value; saveData(); renderUI(); toggleModal('settings-overlay'); }
        function sendMsg(){ const i=document.getElementById('user-input'); if(i.value){ document.getElementById('chat-box').innerHTML+=`<div class="msg msg-user">${i.value}</div><div class="msg msg-ai">Received.</div>`; i.value=""; } }
        function openMap(){ toggleModal('map-overlay'); document.getElementById('nexus-map').innerHTML="<div class='nexus-grid'></div>"; agents.forEach(a=>{document.getElementById('nexus-map').innerHTML+=`<div class='map-node' style='top:${Math.random()*80+10}%; left:${Math.random()*80+10}%;'></div>`}); }
        function handleCoreClick(){ balance+=10000; renderUI(); msg("DATA MINED"); }

        setInterval(()=>{document.getElementById('clock').innerText=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})},1000);
        window.onload=function(){ loadData(); }
    </script>
</body>
</html>
