<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>LivenJet | UI Polish</title>
    <style>
        /* --- CORE STYLES --- */
        :root { --gold: #FFD700; --dark: #050505; --accent: #FFD700; --green: #00ff00; --red: #ff4444; --ice: #00f2ff; --purple: #d000ff; }
        body { background-color: #000; color: var(--accent); font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; overflow: hidden; user-select: none; transition: 0.5s; perspective: 1000px; padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
        
        /* --- VISUAL FX --- */
        .scanlines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2)); background-size: 100% 4px; pointer-events: none; z-index: 9998; opacity: 0.3; }
        .tilt-card { transition: transform 0.1s; transform-style: preserve-3d; }
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        
        /* --- SINGULARITY MODE --- */
        body.singularity { --accent: var(--purple); --green: var(--ice); }
        body.singularity .neural-core { box-shadow: 0 0 50px var(--purple); animation: pulseFast 0.5s infinite; }
        @keyframes pulseFast { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- BOOT & LOCK --- */
        #boot-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; padding: 20px; box-sizing: border-box; text-align: left; font-family: monospace; color: var(--green); font-size: 12px; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; }
        .boot-line { margin: 2px 0; animation: typeLine 0.1s; }
        #launchpad { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s ease-in-out; }
        .scanner-box { width: 100px; height: 100px; border: 2px solid #333; border-radius: 20px; position: relative; overflow: hidden; box-shadow: 0 0 20px rgba(255, 215, 0, 0.1); }
        .scan-line { width: 100%; height: 4px; background: #0f0; position: absolute; top: 0; animation: scan 2s linear infinite; }
        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
        .auth-btn { background: var(--accent); border: none; padding: 15px 40px; border-radius: 30px; font-weight: bold; margin-top: 30px; cursor: pointer; animation: pulse 2s infinite; }

        /* --- HEADER ELEMENTS --- */
        .avatar-btn { width: 35px; height: 35px; background: var(--accent); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #000; font-weight: 900; position: fixed; top: calc(20px + env(safe-area-inset-top)); left: 20px; z-index: 2001; cursor: pointer; transition: 0.5s; }
        .currency-btn { width: 35px; height: 35px; background: #222; border: 1px solid var(--accent); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #fff; position: fixed; top: calc(20px + env(safe-area-inset-top)); left: 65px; z-index: 2001; cursor: pointer; font-size: 10px; font-weight: bold; }
        .settings-btn { width: 35px; height: 35px; background: #222; border: 1px solid #333; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; position: fixed; top: calc(20px + env(safe-area-inset-top)); right: 20px; z-index: 2001; cursor: pointer; font-size: 18px; }
        
        .ticker-wrap { width: 100%; background: transparent; padding: 5px 0; position: fixed; top: calc(65px + env(safe-area-inset-top)); z-index: 1000; font-family: monospace; font-size: 10px; color: #666; pointer-events: none; }

        /* --- NEURAL CORE --- */
        .neural-core { width: 70px; height: 70px; background: radial-gradient(circle, var(--accent) 0%, transparent 70%); border-radius: 50%; margin: 100px auto 10px; position: relative; animation: core-pulse 3s infinite; cursor: pointer; transition: 0.5s; z-index: 500; }
        .core-inner { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40%; height: 40%; background: #fff; border-radius: 50%; box-shadow: 0 0 20px var(--accent); }
        @keyframes core-pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.1); opacity: 1; } }

        /* --- MAIN APP --- */
        #app-interface { display: none; opacity: 0; transition: 1s; padding-bottom: 150px; overflow-y: scroll; height: 100vh; }
        .pillar { display: none; padding: 20px; animation: slideIn 0.4s ease; }
        .active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }
        
        .intel-card { background: rgba(15,15,15,0.9); border: 1px solid #222; border-bottom: 2px solid var(--accent); border-radius: 16px; padding: 20px; margin: 15px auto; max-width: 340px; text-align: left; transition: 0.3s; }
        .btn { background: var(--accent); border: none; padding: 15px; width: 100%; border-radius: 12px; margin-top: 10px; font-weight: bold; cursor: pointer; }
        .btn-full { background: var(--accent); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-outline { background: transparent; border: 1px solid #333; color: #fff; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        /* --- DOCK (FIXED FOR IOS) --- */
        .dock { 
            position: fixed; 
            bottom: calc(30px + env(safe-area-inset-bottom)); /* LIFTED UP */
            left: 50%; 
            transform: translateX(-50%); 
            width: 90%; 
            max-width: 400px; 
            background: rgba(10,10,10,0.95); 
            border: 1px solid #333; 
            border-radius: 25px; 
            display: flex; 
            justify-content: space-around; 
            padding: 18px 0; 
            z-index: 1000; 
            backdrop-filter: blur(10px); 
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .dock-item { font-size: 24px; opacity: 0.5; transition: 0.3s; cursor: pointer; } /* Increased opacity */
        .active-icon { opacity: 1; color: var(--accent); transform: translateY(-5px); text-shadow: 0 0 10px var(--accent); }

        /* --- NEWS TICKER (FIXED FOR IOS) --- */
        .news-ticker { 
            position: fixed; 
            bottom: calc(95px + env(safe-area-inset-bottom)); /* LIFTED ABOVE DOCK */
            width: 100%; 
            background: #111; 
            border-top: 1px solid #333; 
            padding: 5px 0; 
            overflow: hidden; 
            white-space: nowrap; 
            z-index: 900; 
        }
        .ticker-content { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; color: #888; font-size: 10px; font-family: monospace; }
        @keyframes scroll { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }

        /* --- WIDGETS & MODULES --- */
        .input-group { margin-bottom: 15px; text-align: left; }
        .input-label { font-size: 10px; color: #888; margin-bottom: 5px; display: block; }
        .app-input { width: 100%; background: #222; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 8px; box-sizing: border-box; font-size: 16px; outline: none; }
        select.app-input { appearance: none; }
        
        .action-grid { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; }
        .action-btn { flex: 1; background: #1a1a1a; border-radius: 12px; padding: 15px 5px; cursor: pointer; border: 1px solid #333; transition: 0.2s; }
        .action-btn:active { background: #333; transform: scale(0.95); }
        .action-icon { font-size: 20px; margin-bottom: 5px; }
        .action-text { font-size: 10px; font-weight: bold; color: #ccc; }

        .ledger-box { margin-top: 20px; text-align: left; max-height: 200px; overflow-y: auto; padding-right: 5px; }
        .tx-row { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #222; animation: fadeIn 0.5s; }
        .tx-icon { width: 30px; height: 30px; background: #222; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; margin-right: 10px; }
        .tx-details { flex: 1; }
        .tx-title { font-size: 12px; color: #fff; margin: 0; font-weight: bold; }
        .tx-date { font-size: 10px; color: #666; margin: 0; }
        .tx-amt { font-size: 12px; font-weight: bold; color: #ff4444; }
        
        .venture-card { background: #1a1a1a; border: 1px solid #333; padding: 15px; border-radius: 10px; margin-bottom: 15px; text-align: left; position: relative; overflow: hidden; }
        .venture-card.critical { border: 1px solid var(--red); animation: shake 0.5s infinite; }
        .venture-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .venture-title { font-weight: bold; color: var(--ice); font-size: 14px; }
        .venture-profit { color: var(--green); font-family: monospace; font-size: 14px; }
        .venture-progress { width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
        .venture-bar { height: 100%; background: var(--green); width: 0%; transition: width 1s linear; }
        .venture-actions { display: flex; gap: 10px; margin-top: 10px; }
        .venture-btn { flex: 1; padding: 8px; background: #222; border: 1px solid #444; color: #fff; border-radius: 5px; cursor: pointer; font-size: 10px; }
        
        .asset-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .asset-item { background: #222; border: 1px solid #444; border-radius: 10px; padding: 10px; opacity: 0.5; transition: 0.3s; }
        .asset-item.owned { opacity: 1; border-color: var(--gold); box-shadow: 0 0 15px rgba(255, 215, 0, 0.2); }
        .asset-icon { font-size: 30px; margin-bottom: 5px; }
        .asset-name { font-size: 10px; font-weight: bold; color: #fff; }
        .asset-cost { font-size: 9px; color: var(--accent); }

        .grid-monitor { width: 100%; height: 100px; background: #000; border: 1px solid #333; margin-top: 10px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .sine-wave { position: absolute; width: 200%; height: 100%; background: repeating-linear-gradient(90deg, transparent 0, transparent 20px, var(--accent) 20px, var(--accent) 22px); opacity: 0.2; animation: wave 2s linear infinite; }
        @keyframes wave { 0% { transform: translateX(0); } 100% { transform: translateX(-50px); } }
        .grid-status-text { z-index: 2; font-family: monospace; font-size: 24px; font-weight: bold; color: var(--accent); text-shadow: 0 0 10px var(--accent); }
        .grid-fail { color: var(--red); text-shadow: 0 0 10px var(--red); animation: blinkRed 0.5s infinite; }
        @keyframes blinkRed { 50% { opacity: 0.5; } }

        /* --- MODAL OVERLAYS --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 5000; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        #call-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 8000; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .caller-icon { width: 100px; height: 100px; background: #222; border-radius: 50%; border: 2px solid var(--accent); display: flex; align-items: center; justify-content: center; font-size: 40px; margin-bottom: 20px; animation: pulse 1s infinite; }
        .call-actions { display: flex; gap: 40px; margin-top: 50px; }
        .call-btn { width: 70px; height: 70px; border-radius: 50%; border: none; color: #fff; font-size: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .accept { background: #0f0; box-shadow: 0 0 20px #0f0; }
        .decline { background: #f00; box-shadow: 0 0 20px #f00; }
        
        #drone-layer { position: fixed; top: 20%; left: -100px; z-index: 6000; font-size: 40px; transition: 0.1s; pointer-events: none; }
        .fly-anim { animation: flyOver 3s linear forwards; }
        @keyframes flyOver { 0% { left: -100px; transform: rotate(10deg); } 50% { left: 50%; transform: rotate(0deg); } 100% { left: 120%; transform: rotate(-10deg); } }
        
        #red-alert { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 0, 0, 0.3); z-index: 7000; display: none; pointer-events: none; mix-blend-mode: overlay; }
        #breach-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9000; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .breach-box { border: 2px solid var(--red); padding: 20px; border-radius: 15px; width: 80%; background: #100; text-align: center; box-shadow: 0 0 50px var(--red); }
        .defend-bar-bg { width: 100%; height: 20px; background: #300; margin: 20px 0; border: 1px solid var(--red); }
        .defend-bar-fill { width: 0%; height: 100%; background: var(--red); transition: 0.1s; }
        .defend-btn { background: var(--red); color: #fff; font-size: 20px; font-weight: bold; border: none; padding: 20px; width: 100%; border-radius: 10px; cursor: pointer; animation: pulse 0.5s infinite; }
        
        /* CHAT */
        .chat-card { height: 70vh; display: flex; flex-direction: column; justify-content: space-between; padding: 0; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; text-align: left; background: #000; }
        .chat-input-area { padding: 10px; background: #222; display: flex; gap: 10px; }
        .chat-input { flex: 1; padding: 10px; border-radius: 20px; border: none; background: #333; color: #fff; outline: none; }
        .msg { padding: 8px 12px; border-radius: 12px; margin-bottom: 10px; font-size: 12px; max-width: 70%; }
        .msg-ai { background: #333; color: #fff; border-top-left-radius: 0; }
        .msg-user { background: var(--accent); color: #000; margin-left: auto; border-bottom-right-radius: 0; }
        .fab-chat { 
            position: fixed; 
            bottom: calc(115px + env(safe-area-inset-bottom)); /* LIFTED HIGHER */
            right: 20px; 
            width: 50px; 
            height: 50px; 
            background: var(--accent); 
            border-radius: 50%; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            font-size: 24px; 
            box-shadow: 0 0 20px rgba(255,215,0,0.4); 
            z-index: 4000; 
            cursor: pointer; 
        }
        .fab-label { font-size: 8px; color: #000; font-weight: bold; margin-top: -5px; }

        /* HACK GAME */
        .hack-bar-container { width: 100%; height: 30px; background: #222; border: 1px solid #444; border-radius: 15px; position: relative; overflow: hidden; margin: 30px 0; }
        .hack-zone { width: 40px; height: 100%; background: rgba(0, 255, 0, 0.3); border-left: 1px solid #0f0; border-right: 1px solid #0f0; position: absolute; left: 50%; transform: translateX(-50%); }
        .hack-cursor { width: 4px; height: 100%; background: #fff; position: absolute; left: 0; box-shadow: 0 0 10px #fff; }
        .cursor-moving { animation: moveCursor 1s linear infinite alternate; }
        @keyframes moveCursor { 0% { left: 0%; } 100% { left: 98%; } }

        /* MISC */
        .receipt-card { background: #fff; color: #000; border: none; }
        .dashed-line { border-bottom: 2px dashed #ccc; margin: 20px 0; }
        .pass-row { display: flex; justify-content: space-between; margin: 15px 0; font-size: 12px; border-bottom: 1px solid #333; padding-bottom: 5px; }
        .trade-row { display: flex; justify-content: space-between; align-items: center; background: #1a1a1a; padding: 10px; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #333; }
        .trade-name { font-size: 12px; font-weight: bold; color: #fff; }
        .trade-price { font-size: 12px; font-family: monospace; color: var(--gold); }
        .trade-actions { display: flex; gap: 5px; }
        .trade-btn { background: #333; border: 1px solid #555; color: #fff; font-size: 9px; padding: 5px 8px; border-radius: 4px; cursor: pointer; }
        .trend-up { color: #0f0; } .trend-down { color: #f00; }
        .agent-list { text-align: left; max-height: 100px; overflow-y: auto; margin-top: 10px; }
        .active-agent { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #222; font-size: 10px; }
        .agent-item { display: flex; justify-content: space-between; align-items: center; background: #1a1a1a; padding: 10px; border-radius: 8px; margin-bottom: 5px; border-left: 3px solid var(--green); }
        .agent-item.hostile { border-left: 3px solid var(--red); background: #2a0000; }
        .status-badge { font-size: 9px; padding: 3px 6px; border-radius: 4px; background: #003300; color: #0f0; }
        .status-badge.alert { background: #550000; color: #f00; animation: blinkRed 1s infinite; }
        .war-actions { display: none; gap: 5px; margin-top: 5px; width: 100%; }
        .war-btn { flex: 1; font-size: 9px; padding: 5px; border: 1px solid #444; background: #000; color: #fff; cursor: pointer; }
        .map-node { width: 8px; height: 8px; background: var(--green); border-radius: 50%; position: absolute; box-shadow: 0 0 10px var(--green); animation: pulse 1s infinite; }
        .map-node.red { background: var(--red); box-shadow: 0 0 10px var(--red); }
        .map-label { position: absolute; color: #fff; font-size: 8px; white-space: nowrap; transform: translate(-50%, -15px); }
        .nexus-map { width: 100%; height: 300px; background: #001; border: 1px solid #333; border-radius: 10px; position: relative; overflow: hidden; background-image: radial-gradient(#222 1px, transparent 1px); background-size: 20px 20px; }
        .nexus-grid { position: absolute; top: 0; left: 0; width: 100%; height: 100%; animation: gridScroll 10s linear infinite; opacity: 0.3; background: linear-gradient(90deg, rgba(0,255,0,0.1) 1px, transparent 1px), linear-gradient(rgba(0,255,0,0.1) 1px, transparent 1px); background-size: 40px 40px; }
        @keyframes gridScroll { 0% { background-position: 0 0; } 100% { background-position: 40px 40px; } }
        .trophy { background: #111; border: 1px solid #333; border-radius: 10px; padding: 10px; opacity: 0.3; transition: 0.3s; }
        .trophy.unlocked { opacity: 1; border-color: var(--gold); box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
        .trophy-icon { font-size: 24px; margin-bottom: 5px; }
        .trophy-name { font-size: 8px; color: #888; text-transform: uppercase; }
        .frozen { border-color: var(--ice) !important; background: linear-gradient(145deg, #002, #000) !important; box-shadow: 0 0 20px var(--ice) !important; }
        .frozen-text { color: var(--ice) !important; text-shadow: 0 0 10px var(--ice); }
    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div id="boot-screen"></div>
    <div id="red-alert"></div>

    <div id="call-overlay"><div class="caller-icon">üë§</div><div style="font-size:20px; font-weight:bold; margin-bottom:5px;">UNKNOWN NUMBER</div><div style="font-size:12px; color:#888;">INCOMING SECURE CALL...</div><div class="call-actions"><button class="call-btn decline" onclick="endCall()">‚úï</button><button class="call-btn accept" onclick="answerCall()">üìû</button></div></div>
    <div id="drone-layer">üõ∏</div>
    <div id="breach-overlay"><div class="breach-box"><h1 style="color:var(--red); font-size:24px; margin:0;">‚ö†Ô∏è SYSTEM BREACH</h1><p style="color:#fff; font-size:12px;">HACKER DETECTED! FUNDS AT RISK!</p><div class="defend-bar-bg"><div class="defend-bar-fill" id="defend-bar"></div></div><button class="defend-btn" onclick="chargeFirewall()">DEPLOY FIREWALL</button></div></div>

    <div id="assets-overlay" class="modal-overlay">
        <div class="modal-card">
            <h2 style="color:var(--gold);">ASSET VAULT</h2>
            <div class="asset-grid" id="asset-list">
                </div>
            <button class="btn-full" style="background:#222; color:#fff;" onclick="toggleModal('assets-overlay')">CLOSE VAULT</button>
        </div>
    </div>

    <div id="ventures-overlay" class="modal-overlay"><div class="modal-card"><h2 style="color:var(--ice);">BUSINESS EMPIRE</h2><div id="active-ventures"></div><div style="margin-top:20px; border-top:1px dashed #333; padding-top:20px;"><h3>START NEW VENTURE</h3><div class="input-group"><label class="input-label">BUSINESS NAME</label><input type="text" class="app-input" id="biz-name" placeholder="e.g. Lagos Tech"></div><div class="input-group"><label class="input-label">TYPE</label><select class="app-input" id="biz-type"><option value="retail">RETAIL CHAIN (Low Risk)</option><option value="tech">TECH STARTUP (Med Risk)</option><option value="oil">OIL RIG (High Yield)</option></select></div><p style="font-size:10px; color:#888;">SEED CAPITAL REQUIRED: ‚Ç¶100,000</p><button class="btn-full" onclick="createBusiness()">LAUNCH ENTERPRISE</button></div><button class="btn-outline" onclick="toggleModal('ventures-overlay')">CLOSE</button></div></div>
    <div id="trophy-overlay" class="modal-overlay"><div class="modal-card"><h2 style="color:var(--gold);">ACHIEVEMENTS</h2><div class="trophy-grid"><div class="trophy" id="badge-breach"><div class="trophy-icon">üõ°Ô∏è</div><div class="trophy-name">SURVIVOR</div></div><div class="trophy" id="badge-hack"><div class="trophy-icon">üì°</div><div class="trophy-name">HACKER</div></div><div class="trophy" id="badge-mine"><div class="trophy-icon">‚õèÔ∏è</div><div class="trophy-name">MINER</div></div><div class="trophy" id="badge-rich"><div class="trophy-icon">üí∞</div><div class="trophy-name">TYCOON</div></div><div class="trophy" id="badge-god"><div class="trophy-icon">‚ö°</div><div class="trophy-name">GOD MODE</div></div><div class="trophy" id="badge-agent"><div class="trophy-icon">üïµÔ∏è</div><div class="trophy-name">COMMANDER</div></div><div class="trophy" id="badge-trade"><div class="trophy-icon">‚öñÔ∏è</div><div class="trophy-name">TRADER</div></div><div class="trophy" id="badge-grid"><div class="trophy-icon">üè≠</div><div class="trophy-name">GRID MASTER</div></div><div class="trophy" id="badge-ceo"><div class="trophy-icon">üëî</div><div class="trophy-name">CEO</div></div><div class="trophy" id="badge-war"><div class="trophy-icon">‚öîÔ∏è</div><div class="trophy-name">WARLORD</div></div><div class="trophy" id="badge-apex"><div class="trophy-icon">üü£</div><div class="trophy-name">APEX</div></div></div><button class="btn-full" onclick="toggleModal('trophy-overlay')">CLOSE</button></div></div>
    <div id="hack-overlay" class="modal-overlay"><div class="modal-card" style="border-color:red;"><h2 style="margin: 0 0 10px 0; color:red;">SATELLITE UPLINK</h2><div class="hack-bar-container"><div class="hack-zone"></div><div class="hack-cursor cursor-moving" id="hack-cursor"></div></div><div style="font-family:monospace; color:#fff; font-size:12px; margin:20px 0;" id="hack-log">WAITING FOR SIGNAL...</div><button class="btn-full" style="background:red;" onclick="lockSignal()">LOCK SIGNAL</button><button class="btn-full" style="background:#222; border:1px solid #333; color:#fff;" onclick="toggleModal('hack-overlay')">ABORT</button></div></div>
    <div id="market-overlay" class="modal-overlay"><div class="modal-card" style="border-color:#0f0;"><h2 style="color:#0f0;">BLACK MARKET</h2><div style="background:#000; padding:10px; border-radius:8px; margin-bottom:15px; border:1px solid #333;">LJN BALANCE: <span id="market-bal" style="color:#0f0; font-weight:bold;">0.00</span></div><div class="market-item"><div><div style="color:#fff; font-weight:bold; font-size:12px;">GHOST VPN</div></div><button class="market-btn" onclick="buyItem('vpn', 2.5)">2.5 LJN</button></div><div class="market-item"><div><div style="color:#fff; font-weight:bold; font-size:12px;">NEURAL HALO</div></div><button class="market-btn" onclick="buyItem('halo', 5.0)">5.0 LJN</button></div><div class="market-item"><div><div style="color:#fff; font-weight:bold; font-size:12px;">CYBER NUKE</div></div><button class="market-btn" onclick="buyItem('nuke', 5.0)">5.0 LJN</button></div><button class="btn-full" style="background:#222; color:#fff; border:1px solid #333;" onclick="toggleModal('market-overlay')">CLOSE</button></div></div>
    <div id="agent-overlay" class="modal-overlay"><div class="modal-card"><h2>DEPLOY AGENT</h2><div class="input-group"><label class="input-label">TARGET CITY</label><select class="app-input" id="agent-city"><option>Dubai</option><option>London</option><option>New York</option><option>Tokyo</option></select></div><p style="font-size:12px; color:var(--accent);">COST: ‚Ç¶50,000</p><button class="btn-full" onclick="deployAgent()">AUTHORIZE DEPLOYMENT</button><button class="btn-full" style="background:#222; color:#fff;" onclick="toggleModal('agent-overlay')">CANCEL</button></div></div>
    <div id="settings-overlay" class="modal-overlay"><div class="modal-card"><h2>CONTROL CENTER</h2><div class="input-group"><label class="input-label">DISPLAY NAME</label><input type="text" class="app-input" id="set-name" value="STEVEN ADEWOLE"></div><div class="input-group"><label class="input-label">SYSTEM THEME</label><div style="display:flex; gap:10px;"><button class="btn" style="margin:0; flex:1;" onclick="toggleTheme('gold')">GOLD</button><button class="btn" style="margin:0; flex:1; background:#0f0; color:#000;" onclick="toggleTheme('matrix')">MATRIX</button></div></div><div style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;"><span style="font-size:10px; color:#888;">PANIC PROTOCOL</span><button style="background:none; border:none; font-size:24px; cursor:pointer;" onclick="activatePanic()">üíÄ</button></div><button class="btn-full" onclick="saveSettings()">SAVE</button><button class="btn-outline" style="border-color:#ff4444; color:#ff4444;" onclick="hardReset()">HARD RESET</button><button class="btn-outline" onclick="toggleModal('settings-overlay')">CLOSE</button></div></div>
    <div id="scan-overlay" class="modal-overlay"><div class="modal-card"><h2>SCAN & PAY</h2><div class="camera-view"><div class="laser-beam"></div></div><p id="scan-status" style="color:var(--accent); font-size:12px; margin-top:15px; height:15px;"></p><button class="btn-full" onclick="toggleModal('scan-overlay')">CANCEL</button></div></div>
    <div id="loan-overlay" class="modal-overlay"><div class="modal-card"><h2>CREDIT SCAN</h2><div id="credit-scanner" style="display:block;"><p style="font-size:10px; color:#888;">SCANNING...</p><div style="width:100%; height:4px; background:#222; margin:20px 0;"><div style="width:100%; height:100%; background:var(--accent); animation:growBar 2s;"></div></div></div><div id="credit-result" style="display:none;"><div class="credit-meter"><div class="credit-score">780</div></div><h1 style="margin:0; font-size:30px; color:var(--green);">‚Ç¶ 500,000</h1><button class="btn-full" onclick="disburseLoan()">ACCEPT</button></div></div></div>
    <div id="send-overlay" class="modal-overlay"><div class="modal-card"><h2>SEND MONEY</h2><div class="input-group"><label class="input-label">ACCOUNT</label><input type="number" class="app-input" id="send-acc" oninput="verifyAccount()"></div><div id="verify-box" style="display:none; background:#1a1a1a; padding:10px; border-radius:8px; margin-bottom:10px;"><p id="verified-name" style="color:var(--green); font-weight:bold; margin:0;">...</p></div><div class="input-group"><label class="input-label">AMOUNT</label><input type="number" class="app-input" id="send-amt"></div><button class="btn-full" onclick="processTransfer()">CONFIRM</button><button class="btn-full" style="background:#222; color:#fff;" onclick="toggleModal('send-overlay')">CANCEL</button></div></div>
    <div id="map-overlay" class="modal-overlay"><div class="modal-card"><h2>SATELLITE</h2><div class="map-grid" id="nexus-map"><div class="nexus-grid"></div></div><p style="font-size:10px; color:var(--green); margin-top:10px;" id="map-status">SYSTEM SECURE</p><button class="btn-full" onclick="toggleModal('map-overlay')">CLOSE NEXUS</button></div></div>
    <div id="chat-overlay" class="modal-overlay"><div class="modal-card chat-card"><div style="padding:10px; background:#222;">TERMINAL <span onclick="toggleModal('chat-overlay')" style="float:right;">‚úï</span></div><div class="chat-body" id="chat-box"></div><div class="chat-input-area"><input type="text" class="chat-input" id="user-input" placeholder="Type /help for codes"><button class="btn" style="width:auto; margin:0;" onclick="sendMsg()">‚û§</button></div></div></div>
    <div id="passport-overlay" class="modal-overlay"><div class="modal-card"><h2 style="color:var(--accent);">PASSPORT</h2><div style="width:60px; height:60px; background:#222; border:2px solid var(--accent); border-radius:50%; margin:10px auto; display:flex; align-items:center; justify-content:center; font-size:24px;" id="pass-avatar">SA</div><div class="pass-row"><span>NAME</span><span style="color:var(--accent);" id="pass-name">STEVEN</span></div><div class="pass-row"><span>CLEARANCE</span><span style="color:var(--accent); cursor:pointer;" id="pass-lvl" onclick="openTrophies()">LEVEL 5 (TAP)</span></div><div class="pass-row"><span>IP</span><span style="color:var(--accent);" id="pass-ip">102.88.xx</span></div><button class="btn-full" onclick="toggleModal('passport-overlay')">CLOSE</button></div></div>
    <div id="receipt-overlay" class="modal-overlay"><div class="modal-card receipt-card"><h2 id="rec-title">SUCCESS</h2><div class="dashed-line"></div><div style="display:flex; justify-content:space-between;"><span>AMT</span><span id="rec-amt">‚Ç¶ 0</span></div><div style="display:flex; justify-content:space-between;"><span>TO</span><span id="rec-to">...</span></div><button class="btn-full" style="background:#000; color:#fff;" onclick="closeReceipt()">DOWNLOAD</button></div></div>

    <div class="news-ticker"><div class="ticker-content" id="news-text">LIVENJET APEX OS ONLINE ... INFLUENCE MULTIPLIERS ACTIVE ... SYSTEM DOMINANCE ...</div></div>

    <div id="launchpad">
        <h1 style="letter-spacing: 5px; font-size: 24px;">LIVENJET</h1>
        <p style="color: #666; font-size: 10px; margin-bottom: 40px;">APEX OS v39.0 (IOS FIX)</p>
        <div class="scanner-box"><div class="scan-line"></div><div class="fingerprint">üñê</div></div>
        <button class="auth-btn" onclick="authenticate()">SCAN IDENTITY</button>
        <p id="auth-status" style="margin-top: 20px; font-family: monospace; font-size: 10px; color: #444;">WAITING FOR INPUT...</p>
    </div>

    <div id="app-interface">
        <div class="ticker-wrap">
            <span style="font-weight:bold; color:var(--ice);" id="influence-score">INFLUENCE: 0%</span> | 
            <span onclick="restorePanic()">SYSTEM NODE: LOS-01</span> | <span id="clock"></span>
        </div>
        <div class="avatar-btn" onclick="toggleModal('passport-overlay')" id="main-avatar">SA</div>
        <div class="currency-btn" onclick="toggleCurrency()">‚Ç¶ / $</div>
        <div class="settings-btn" onclick="toggleModal('settings-overlay')">‚öôÔ∏è</div>
        
        <div class="neural-core" onclick="handleCoreClick()" id="neural-core"><div class="core-inner"></div></div>
        <div style="font-family: monospace; font-size: 10px; color: #888; height: 20px;" id="ai-msg">IDENTITY VERIFIED.</div>

        <div id="home" class="pillar active">
            <div class="intel-card tilt-card">
                <p style="font-size: 10px; color: #666; margin: 0;">GLOBAL LIQUIDITY</p>
                <h2 style="margin: 5px 0; font-size: 36px; font-family: 'Courier New'; cursor: pointer;" id="wallet-bal" onclick="toggleStealth()">‚Ç¶ 50,000.00</h2>
                <div class="action-grid">
                    <div class="action-btn" onclick="toggleModal('send-overlay')"><div class="action-icon">üí∏</div><div class="action-text">SEND</div></div>
                    <div class="action-btn" onclick="toggleModal('ventures-overlay')"><div class="action-icon" style="color:var(--ice);">üè¢</div><div class="action-text">VENTURES</div></div>
                    <div class="action-btn" onclick="openAssets()"><div class="action-icon" style="color:var(--gold);">üèõÔ∏è</div><div class="action-text">ASSETS</div></div>
                    <div class="action-btn" onclick="msg('Deposit via USSD *991#')"><div class="action-icon">‚ûï</div><div class="action-text">ADD</div></div>
                </div>
                <p style="font-size: 9px; color: #666; margin-top: 20px;">RECENT ACTIVITY</p>
                <div class="ledger-box" id="ledger-list"></div>
            </div>
            <button class="btn" onclick="msg('Syncing Global Accounts...')">SYNC NETWORK</button>
        </div>

        <div id="util" class="pillar">
            <div class="intel-card tilt-card">
                <h3>INFRASTRUCTURE COMMAND</h3>
                <div class="grid-monitor"><div class="sine-wave"></div><div class="grid-status-text" id="grid-text">GRID: STABLE</div></div>
                <div style="margin-top:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                    <button class="btn" style="margin:0; background:#222; font-size:10px;" onclick="buyInfra('solar', 200000)">SOLAR FARM <br>‚Ç¶200k</button>
                    <button class="btn" style="margin:0; background:#222; font-size:10px;" onclick="buyInfra('nuke', 500000)">NUCLEAR NODE <br>‚Ç¶500k</button>
                </div>
                <button class="btn" style="margin-top:10px; background:var(--red); display:none;" id="inject-btn" onclick="injectPower()">‚ö° INJECT POWER</button>
            </div>
            <div class="intel-card tilt-card" style="margin-top:10px;"><h3>SMART VEND</h3><div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;"><button class="btn" style="margin:0; background:#222; color:#fff;" onclick="pay(1000, 'Power Unit', true)">‚ö° 1,000</button><button class="btn" style="margin:0; background:#222; color:#fff;" onclick="pay(2000, 'Data Plan', true)">üì± 2,000</button></div></div>
        </div>

        <div id="logi" class="pillar">
            <div class="intel-card tilt-card">
                <h3>WAR ROOM / ACTIVE AGENTS</h3>
                <div class="agent-list" id="agent-display"><div style="color:#666; font-size:10px; text-align:center; padding:10px;">NO AGENTS DEPLOYED</div></div>
                <button class="btn" onclick="toggleModal('agent-overlay')" style="margin-top:10px; font-size:10px;">+ DEPLOY AGENT (‚Ç¶50k)</button>
            </div>
            <div class="intel-card tilt-card">
                <h3>GLOBAL COMMODITIES</h3>
                <div id="commodity-list" style="margin-top:10px;"></div>
            </div>
            <button class="btn" onclick="openMap()">OPEN NEXUS MAP</button>
            <button class="btn" style="background:#000; border:1px solid red; color:red; margin-top:10px;" onclick="openHack()">OVERRIDE SATELLITE</button>
        </div>

        <div id="fina" class="pillar">
            <div class="intel-card tilt-card" id="credit-card-ui" onclick="toggleFreeze()" style="cursor:pointer; border-color:#fff;">
                <p style="font-size: 10px;">PLATINUM CARD</p><h3 style="letter-spacing: 3px;" id="card-num">**** 8820</h3><p style="font-size: 10px; margin-top: 20px;" id="card-status">ACTIVE</p>
            </div>
            <div class="intel-card tilt-card">
                <div style="display:flex; justify-content:space-between; align-items:center;"><h3 style="margin:0;">PORTFOLIO</h3><span style="font-size:10px; color:#0f0;">+12.5%</span></div>
                <div class="miner-box" id="miner-display">INITIALIZING...</div>
                <div class="asset-row"><div class="asset-info"><div class="asset-name">Bitcoin (BTC)</div><div class="asset-price" id="btc-price">$98,420</div></div><div style="text-align:right;"><button class="buy-btn" onclick="pay(5000, 'Bitcoin Inv')">BUY 5k</button></div></div>
                <div class="asset-row"><div class="asset-info"><div class="asset-name">LivenJet (LJN)</div><div class="asset-price" id="ljn-bal">0.00 LJN</div></div><div style="text-align:right;"><button class="buy-btn" onclick="startMining()" id="mine-btn">START MINING</button><button class="buy-btn" style="background:#0f0; color:#000; margin-top:5px;" onclick="openMarket()">MARKET</button></div></div>
                <button class="btn" style="margin-top:10px; border:1px solid var(--accent); background:#000; color:var(--accent);" onclick="rigNews()">RIG MARKET (‚Ç¶50k)</button>
            </div>
        </div>

        <div class="dock">
            <div id="n-home" class="dock-item active-icon" onclick="nav('home')">ü™ê</div>
            <div id="n-util" class="dock-item" onclick="nav('util')">‚ö°</div>
            <div id="n-logi" class="dock-item" onclick="nav('logi')">‚úàÔ∏è</div>
            <div id="n-fina" class="dock-item" onclick="nav('fina')">üí≥</div>
        </div>
        
        <div class="fab-chat" onclick="toggleModal('chat-overlay')">
            üí¨
            <div class="fab-label">AI</div>
        </div>
    </div>

    <script>
        // --- DATA ---
        let balance=50000; let ljnCrypto=0.00; let userName="STEVEN ADEWOLE"; let agents=[]; let badges={breach:false,hack:false,mine:false,rich:false,god:false,agent:false,trade:false,grid:false,ceo:false,war:false,apex:false}; let transactions=[]; let inventory={gold:0,oil:0}; let infra = { solar: 0, nuke: 0 }; let ventures = []; let ownedAssets = { island: false, yacht: false, jet: false, mansion: false };
        let influence = 0; let singularity = false;

        function loadData() {
            if(localStorage.getItem('livenjet_data_v7')) {
                const d = JSON.parse(localStorage.getItem('livenjet_data_v7'));
                balance = d.balance||50000; ljnCrypto=d.ljnCrypto||0; userName=d.userName||"STEVEN ADEWOLE"; agents=d.agents||[]; badges=d.badges||badges; transactions=d.transactions||[]; inventory=d.inventory||{gold:0,oil:0}; infra=d.infra||{solar:0,nuke:0}; ventures=d.ventures||[]; ownedAssets=d.ownedAssets||{island:false,yacht:false,jet:false,mansion:false}; influence=d.influence||0; singularity=d.singularity||false;
                const l = document.getElementById('ledger-list'); l.innerHTML = "";
                if(transactions.length === 0) {
                    l.innerHTML = "<div style='color:#444; font-size:10px; margin-top:10px;'>NO RECENT ACTIVITY</div>";
                } else {
                    transactions.slice(0,5).forEach(tx=>{let c=tx.type==="credit"?"#0f0":"#ff4444"; let s=tx.type==="credit"?"+":"-"; let i=tx.type==="credit"?"üè¶":"üí∏"; l.innerHTML+=`<div class="tx-row"><div class="tx-icon">${i}</div><div class="tx-details"><p class="tx-title">${tx.name}</p><p class="tx-date">Cached</p></div><div class="tx-amt" style="color:${c}">${s}‚Ç¶${tx.amt.toLocaleString()}</div></div>`;});
                }
                updateDisplay(); updateAgentList(); updateVentureUI(); checkAchievements();
                if(singularity) activateSingularity(true);
            } else {
                document.getElementById('ledger-list').innerHTML = "<div style='color:#444; font-size:10px; margin-top:10px;'>NO RECENT ACTIVITY</div>";
            }
        }
        function saveData(){localStorage.setItem('livenjet_data_v7',JSON.stringify({balance,ljnCrypto,userName,agents,badges,transactions,inventory,infra,ventures,ownedAssets,influence,singularity}));}
        function hardReset(){if(confirm("WIPE ALL DATA?")){localStorage.removeItem('livenjet_data_v7');location.reload();}}

        // --- CORE VARIABLES ---
        let isCardFrozen=false; let currency="NGN"; let rate=1500; let godModeCount=0; let isMining=false; let miningSpeed=0.5; let panicMode=false; let tempBalance=0; let btcPrice=98420; let defensePower=0; let commodities={gold:{price:85000,trend:1},oil:{price:12000,trend:-1}}; let gridHealth=100;

        window.onload=function(){
            loadData();
            const boot=document.getElementById('boot-screen');
            const lines=["INITIALIZING KERNEL...", "LOADING USER DATA...", "CHECKING HOSTILES...", "WELCOME TO LIVENJET."];
            let i=0; const interval=setInterval(()=>{if(i<lines.length){boot.innerHTML+=`<div class='boot-line'>${lines[i]}</div>`;i++;}else{clearInterval(interval);setTimeout(()=>{boot.style.display='none';document.getElementById('launchpad').style.display='flex';},800);}},300);
            updateCommodityUI();
        }

        // --- CORE INTERACTION ---
        function handleCoreClick() {
            if(singularity) { msg("SYSTEM TRANSCENDED"); return; }
            godModeCount++; buzz(20);
            if(godModeCount === 5) {
                if(balance >= 1000000000 && influence >= 100 && !singularity) {
                    activateSingularity();
                } else {
                    balance+=10000000; updateDisplay(); msg("GOD MODE: ‚Ç¶10M ADDED"); buzz([100,100,100]); godModeCount=0; badges.god=true;
                }
            }
        }

        function activateSingularity(instant = false) {
            singularity = true;
            document.body.classList.add('singularity');
            document.getElementById('ai-msg').innerText = "ASSUMING DIRECT CONTROL.";
            document.getElementById('ai-msg').style.color = "var(--ice)";
            badges.apex = true;
            saveData();
            if(!instant) {
                buzz([1000, 500, 1000]);
                speak("The Apex Protocol is active. You have conquered the system.");
            }
        }

        // --- BUSINESS LOGIC W/ INFLUENCE (REFINED) ---
        function createBusiness() {
            const name = document.getElementById('biz-name').value;
            const type = document.getElementById('biz-type').value;
            const cost = 100000;
            if(balance >= cost && name) {
                balance -= cost;
                let mult = 1 + (influence / 100); 
                ventures.push({ name: name, type: type, level: 1, revenue: 0, progress: 0, status: 'active' });
                updateDisplay();
                updateVentureUI();
                msg(`VENTURE LAUNCHED (ROI x${mult.toFixed(1)})`);
                buzz([100,100]);
                toggleModal('ventures-overlay');
                badges.ceo = true;
                checkAchievements();
            } else { msg("INSUFFICIENT FUNDS OR INVALID NAME"); }
        }

        function updateVentureUI() {
            const container = document.getElementById('active-ventures');
            if(ventures.length === 0) { container.innerHTML = "<p style='font-size:10px; color:#666;'>NO ACTIVE BUSINESSES</p>"; return; }
            container.innerHTML = "";
            ventures.forEach((v, index) => {
                let typeName = v.type === 'retail' ? "RETAIL" : v.type === 'tech' ? "TECH" : "OIL";
                let criticalClass = v.status === 'critical' ? 'venture-card critical' : 'venture-card';
                let btnState = v.status === 'critical' ? 'disabled' : '';
                container.innerHTML += `<div class="${criticalClass}"><div class="venture-header"><span class="venture-title">${v.name.toUpperCase()} (${typeName})</span><span class="venture-profit">‚Ç¶${v.revenue.toLocaleString()}</span></div><div class="venture-progress"><div class="venture-bar" id="bar-${index}" style="width:${v.progress}%"></div></div><div class="venture-actions"><button class="venture-btn" onclick="collectRevenue(${index})" ${btnState}>COLLECT</button><button class="venture-btn" onclick="upgradeBusiness(${index})" ${btnState}>UPGRADE (‚Ç¶${(v.level*50000).toLocaleString()})</button>${v.status === 'critical' ? `<button class="venture-btn" style="background:var(--red); color:#fff;" onclick="fixBusiness(${index})">RESCUE (‚Ç¶20k)</button>` : ''}</div></div>`;
            });
        }

        setInterval(() => {
            let mult = 1 + (influence / 100);
            ventures.forEach((v, index) => {
                if(v.status === 'active') {
                    if(v.progress < 100) {
                        v.progress += 5 * v.level * mult; 
                        if(v.progress > 100) v.progress = 100;
                        const bar = document.getElementById(`bar-${index}`);
                        if(bar) bar.style.width = v.progress + "%";
                    } else {
                        let yieldAmt = 0;
                        if(v.type === 'retail') yieldAmt = 2000 * v.level;
                        if(v.type === 'tech') yieldAmt = 5000 * v.level;
                        if(v.type === 'oil') yieldAmt = 15000 * v.level;
                        v.revenue += yieldAmt * mult; 
                        v.progress = 0;
                        updateVentureUI();
                    }
                }
                if(Math.random() > 0.995 && v.status === 'active') {
                    v.status = 'critical';
                    msg(`CRISIS AT ${v.name.toUpperCase()}`);
                    buzz([200,200]);
                    updateVentureUI();
                }
            });
            saveData();
        }, 1000);

        function collectRevenue(index) { const v = ventures[index]; if(v.revenue > 0) { balance += v.revenue; msg(`COLLECTED ‚Ç¶${v.revenue.toLocaleString()} FROM ${v.name}`); v.revenue = 0; updateDisplay(); updateVentureUI(); buzz(50); } else { msg("NO REVENUE YET"); } }
        function upgradeBusiness(index) { const v = ventures[index]; const cost = v.level * 50000; if(balance >= cost) { balance -= cost; v.level++; updateDisplay(); updateVentureUI(); msg(`${v.name} UPGRADED TO LVL ${v.level}`); buzz([50,50]); } else { msg("INSUFFICIENT FUNDS"); } }
        function fixBusiness(index) { const v = ventures[index]; if(balance >= 20000) { balance -= 20000; v.status = 'active'; updateDisplay(); updateVentureUI(); msg(`${v.name} RESTORED`); } else { msg("NEED ‚Ç¶20k TO RESCUE"); } }

        function deployAgent() { const city = document.getElementById('agent-city').value; if(balance >= 50000) { balance -= 50000; agents.push({ name: city, status: 'active' }); influence += 5; updateDisplay(); addToLedger("Agent ("+city+")", 50000); updateAgentList(); toggleModal('agent-overlay'); msg("AGENT DEPLOYED TO " + city.toUpperCase()); buzz([100,50,100]); badges.agent = true; checkAchievements(); } else { msg("INSUFFICIENT FUNDS"); } }
        function updateAgentList() { const list = document.getElementById('agent-display'); list.innerHTML = ""; if(agents.length === 0) { list.innerHTML = "<div style='color:#666; font-size:10px; text-align:center; padding:10px;'>NO AGENTS DEPLOYED</div>"; return; } agents.forEach((agent, index) => { let statusClass = agent.status === 'hostile' ? 'agent-item hostile' : 'agent-item'; let badgeClass = agent.status === 'hostile' ? 'status-badge alert' : 'status-badge'; let statusText = agent.status === 'hostile' ? 'UNDER ATTACK' : 'SECURE'; let actionsDisplay = agent.status === 'hostile' ? 'flex' : 'none'; list.innerHTML += `<div class="${statusClass}"><div><span style="font-weight:bold; color:#fff;">AGENT 00${index+1}</span><span class="agent-loc" style="margin-left:5px;">${agent.name.toUpperCase()}</span></div><span class="${badgeClass}">${statusText}</span></div><div class="war-actions" style="display:${actionsDisplay}" id="war-actions-${index}"><button class="war-btn" onclick="resolveConflict(${index}, 'drone')">DRONE (‚Ç¶10k)</button><button class="war-btn" onclick="resolveConflict(${index}, 'bribe')">BRIBE (‚Ç¶50k)</button></div>`; }); }
        function resolveConflict(index, method) { let cost = method === 'drone' ? 10000 : 50000; if(balance >= cost) { balance -= cost; let success = method === 'bribe' ? true : Math.random() > 0.4; if(success) { agents[index].status = 'active'; msg("HOSTILES NEUTRALIZED"); speak("Territory secured."); badges.war = true; } else { msg("DRONE FAILED. TRY AGAIN."); buzz(200); } updateDisplay(); updateAgentList(); } else { msg("INSUFFICIENT FUNDS"); } }
        function cyberNuke() { let cleared = 0; agents.forEach(a => { if(a.status === 'hostile') { a.status = 'active'; cleared++; } }); if(cleared > 0) { msg(`CYBER NUKE: ${cleared} THREATS ELIMINATED`); speak("All targets destroyed."); updateAgentList(); } else { msg("NO TARGETS FOUND"); } }
        setInterval(() => { let activeAgents = agents.filter(a => a.status === 'active').length; if(activeAgents > 0) { const earned = activeAgents * 5000; balance += earned; updateDisplay(); msg(`AGENTS TRIBUTE: ‚Ç¶${earned.toLocaleString()}`); buzz(20); } if(agents.length > 0 && Math.random() > 0.95) { let targetIndex = Math.floor(Math.random() * agents.length); if(agents[targetIndex].status === 'active') { agents[targetIndex].status = 'hostile'; updateAgentList(); msg(`‚ö†Ô∏è ALERT: AGENT IN ${agents[targetIndex].name.toUpperCase()} UNDER FIRE`); speak("Agent under attack."); buzz([500, 500]); } } }, 30000);

        function buyItem(i,c){if(ljnCrypto>=c){ljnCrypto-=c; msg("PURCHASE SUCCESSFUL"); document.getElementById('market-bal').innerText=ljnCrypto.toFixed(2); updateDisplay(); if(i==='halo'){document.getElementById('main-avatar').classList.add('avatar-glow');document.getElementById('pass-avatar').classList.add('avatar-glow');} if(i==='vpn'){document.getElementById('pass-ip').innerText="192.168.GHOST";document.getElementById('pass-ip').style.color="#0f0";} if(i==='lvl6'){document.getElementById('pass-lvl').innerText="LEVEL 6 (GOD)";document.getElementById('pass-lvl').style.color="#0f0";} if(i==='nuke'){cyberNuke();} } else { msg("INSUFFICIENT LJN"); } }
        function openAssets() { toggleModal('assets-overlay'); const list = document.getElementById('asset-list'); list.innerHTML = ""; const assetsDB = [{ id: 'island', name: 'PRIVATE ISLAND', cost: 100000000, icon: 'üèùÔ∏è', desc: 'Stops Cyber Breaches' }, { id: 'yacht', name: 'SUPER YACHT', cost: 20000000, icon: 'üõ≥Ô∏è', desc: 'Status Symbol' }, { id: 'jet', name: 'GULFSTREAM G650', cost: 50000000, icon: '‚úàÔ∏è', desc: 'Fast Travel' }, { id: 'mansion', name: 'EKO ATLANTIC VILLA', cost: 10000000, icon: 'üè∞', desc: 'Base of Ops' }]; assetsDB.forEach(a => { let cls = ownedAssets[a.id] ? 'asset-item owned' : 'asset-item'; let btn = ownedAssets[a.id] ? '<span style="color:#0f0; font-size:10px;">OWNED</span>' : `<button class="btn" style="margin:0; padding:5px; font-size:9px;" onclick="buyAsset('${a.id}', ${a.cost})">BUY ‚Ç¶${(a.cost/1000000).toFixed(0)}M</button>`; list.innerHTML += `<div class="${cls}"><div class="asset-icon">${a.icon}</div><div class="asset-name">${a.name}</div><div class="asset-cost">${a.desc}</div>${btn}</div>`; }); }
        function buyAsset(id, cost) { if(balance >= cost) { balance -= cost; ownedAssets[id] = true; influence += 20; updateDisplay(); openAssets(); msg("ASSET ACQUIRED: " + id.toUpperCase()); buzz([100, 100, 100]); speak("Asset acquired."); } else { msg("INSUFFICIENT FUNDS"); } }
        function rigNews() { if(balance >= 50000) { balance -= 50000; updateDisplay(); msg("INITIATING MEDIA OVERRIDE..."); buzz(50); setTimeout(() => { const news = document.getElementById('news-text'); news.innerText = "BREAKING: GOV ADOPTS BITCOIN! ... GOLD SHORTAGE REPORTED ... BUY NOW! ..."; news.style.color = "#0f0"; btcPrice += 15000; commodities.gold.price += 10000; commodities.gold.trend = 1; updateCommodityUI(); speak("Narrative controlled. Markets reacting."); buzz([50,50]); }, 2000); } else { msg("INSUFFICIENT FUNDS"); } }

        function buzz(d){if(navigator.vibrate)navigator.vibrate(d);}
        function toggleModal(id){buzz(30);const e=document.getElementById(id);e.style.display=(e.style.display==='flex')?'none':'flex';}
        document.addEventListener('mousemove',(e)=>{const c=document.querySelectorAll('.tilt-card');const x=(window.innerWidth/2-e.pageX)/25;const y=(window.innerHeight/2-e.pageY)/25;c.forEach(k=>{k.style.transform=`rotateY(${x}deg) rotateX(${y}deg)`;});});
        function updateCommodityUI(){const l=document.getElementById('commodity-list');l.innerHTML="";for(const[k,d]of Object.entries(commodities)){let c=d.trend>0?"trend-up":"trend-down";let a=d.trend>0?"‚ñ≤":"‚ñº";l.innerHTML+=`<div class="trade-row"><div><div class="trade-name">${k.toUpperCase()} <span style="font-size:9px; color:#888;">(Owned: ${inventory[k]})</span></div><div class="trade-price ${c}">${a} ‚Ç¶${d.price.toLocaleString()}</div></div><div class="trade-actions"><button class="trade-btn" onclick="trade('${k}','buy')">BUY</button><button class="trade-btn" onclick="trade('${k}','sell')">SELL</button></div></div>`;}}
        function trade(i,a){const p=commodities[i].price;if(a==='buy'){if(balance>=p){balance-=p;inventory[i]++;msg(`BOUGHT 1 ${i.toUpperCase()}`);buzz(50);}else{msg("INSUFFICIENT FUNDS");}}else{if(inventory[i]>0){balance+=p;inventory[i]--;msg(`SOLD 1 ${i.toUpperCase()}`);buzz(50);badges.trade=true;}else{msg(`NO ${i.toUpperCase()} TO SELL`);}}updateDisplay();updateCommodityUI();checkAchievements();}
        setInterval(()=>{for(const k in commodities){let c=Math.floor(Math.random()*2000)-1000;commodities[k].price+=c;if(commodities[k].price<5000)commodities[k].price=5000;commodities[k].trend=c>0?1:-1;}updateCommodityUI();if(Math.random()>0.98&&!panicMode&&document.getElementById('launchpad').style.display==='none'&&!ownedAssets.island)triggerBreach();const ch=Math.floor(Math.random()*200)-100;btcPrice+=ch;document.getElementById('btc-price').innerText="$"+btcPrice.toLocaleString();checkAchievements();},5000);
        setInterval(()=>{let inc=(infra.solar*1000)+(infra.nuke*5000); if(inc>0){balance+=inc;updateDisplay();} if(Math.random()>0.99&&gridHealth>50)triggerBlackout();},30000);
        function checkAchievements(){if(balance>1000000&&!badges.rich){badges.rich=true;msg("TROPHY UNLOCKED: TYCOON");}if(ljnCrypto>5&&!badges.mine){badges.mine=true;msg("TROPHY UNLOCKED: MINER");}if(badges.trade)document.getElementById('badge-trade').classList.add('unlocked');if(badges.grid)document.getElementById('badge-grid').classList.add('unlocked');if(badges.ceo)document.getElementById('badge-ceo').classList.add('unlocked');if(badges.war)document.getElementById('badge-war').classList.add('unlocked');if(badges.apex)document.getElementById('badge-apex').classList.add('unlocked');for(const[k,v]of Object.entries(badges)){if(v)document.getElementById('badge-'+k).classList.add('unlocked');}saveData();}
        function openTrophies(){toggleModal('passport-overlay');toggleModal('trophy-overlay');}
        function updateDisplay(){let d=balance;let s="‚Ç¶ ";if(currency==="USD"){d=balance/rate;s="$ ";}document.getElementById('wallet-bal').innerText=s+d.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});document.getElementById('pass-name').innerText=userName;let i=userName.split(' ').map(n=>n[0]).join('').substring(0,2).toUpperCase();document.getElementById('main-avatar').innerText=i;document.getElementById('pass-avatar').innerText=i;document.getElementById('ljn-bal').innerText=ljnCrypto.toFixed(4)+" LJN"; document.getElementById('influence-score').innerText="INFLUENCE: "+influence+"%"; const core = document.getElementById('neural-core'); if(singularity) core.style.background = "radial-gradient(circle, var(--purple) 0%, transparent 70%)"; else if(balance > 10000000) core.style.background = "radial-gradient(circle, #00f2ff 0%, transparent 70%)"; else if(balance > 1000000) core.style.background = "radial-gradient(circle, #FFD700 0%, transparent 70%)"; else core.style.background = "radial-gradient(circle, #ff4444 0%, transparent 70%)"; saveData();}
        function addToLedger(n,a,t="debit"){transactions.unshift({name:n,amt:a,type:t});if(transactions.length>20)transactions.pop();const l=document.getElementById('ledger-list');const r=document.createElement('div');r.className='tx-row';let c=t==="credit"?"#0f0":"#ff4444";let s=t==="credit"?"+":"-";let i=t==="credit"?"üè¶":"üí∏";r.innerHTML=`<div class="tx-icon">${i}</div><div class="tx-details"><p class="tx-title">${n}</p><p class="tx-date">Just Now</p></div><div class="tx-amt" style="color:${c}">${s}‚Ç¶${a.toLocaleString()}</div>`;l.insertBefore(r,l.firstChild);saveData();}
        function openMap(){toggleModal('map-overlay');const m=document.getElementById('nexus-map');m.innerHTML='<div class="nexus-grid"></div>';agents.forEach(a=>{let t=Math.random()*80+10;let l=Math.random()*80+10;let col=a.status==='hostile'?'red':'';m.innerHTML+=`<div class="map-node ${col}" style="top:${t}%; left:${l}%;"><div class="map-label">${a.name.toUpperCase()}</div></div>`;});if(document.getElementById('red-alert').style.display==='block'){m.innerHTML+=`<div class="map-node red" style="top:50%; left:50%;"><div class="map-label" style="color:red;">THREAT DETECTED</div></div>`;}}
        function triggerBreach(){buzz([500,200,500]);document.body.classList.add('shake');document.getElementById('red-alert').style.display="block";document.getElementById('breach-overlay').style.display="flex";defensePower=0;updateDefenseBar();speak("System Breach.");}
        function chargeFirewall(){defensePower+=10;buzz(50);updateDefenseBar();if(defensePower>=100){document.getElementById('breach-overlay').style.display="none";document.getElementById('red-alert').style.display="none";document.body.classList.remove('shake');balance+=10000;updateDisplay();msg("THREAT ELIMINATED. +‚Ç¶10k");speak("Threat Neutralized.");badges.breach=true;}}
        function updateDefenseBar(){document.getElementById('defend-bar').style.width=defensePower+"%";}
        function triggerBlackout(){gridHealth=0;document.body.style.filter="brightness(0.2)";document.getElementById('grid-text').innerText="GRID FAILURE";document.getElementById('grid-text').classList.add('grid-fail');document.getElementById('inject-btn').style.display="block";speak("Warning. Grid Collapse Detected.");buzz([500,500,500]);}
        function injectPower(){gridHealth+=20;buzz(50);if(gridHealth>=100){gridHealth=100;document.body.style.filter="brightness(1)";document.getElementById('grid-text').innerText="GRID: STABLE";document.getElementById('grid-text').classList.remove('grid-fail');document.getElementById('inject-btn').style.display="none";balance+=150000;updateDisplay();msg("GRID RESTORED. REWARD: ‚Ç¶150k");speak("Power Systems Online.");badges.grid=true;checkAchievements();}}
        function buyInfra(t,c){if(balance>=c){balance-=c;infra[t]++;updateDisplay();msg("ASSET ACQUIRED: "+t.toUpperCase());buzz([100,50,100]);}else{msg("INSUFFICIENT FUNDS");}}
        function pay(a,n,u=false){if(isCardFrozen){msg("CARD FROZEN");buzz([50,50,50]);return;}if(balance<a){msg("INSUFFICIENT FUNDS");return;}buzz(50);balance-=a;updateDisplay();addToLedger(n,a);if(u)flyDrone();toggleModal('receipt-overlay');document.getElementById('rec-title').innerText="SUCCESS";document.getElementById('rec-amt').innerText="‚Ç¶ "+a.toLocaleString();}
        function startMining(){if(isMining)return;isMining=true;const b=document.getElementById('mine-btn');const box=document.getElementById('miner-display');b.innerText="MINING...";box.style.display="block";let h=0;const i=setInterval(()=>{h++;box.innerHTML=`<div class="hash-line">> HASH: ${Math.random().toString(36).substring(2,15)}...</div>`+box.innerHTML;if(h%5===0){ljnCrypto+=Math.random()*miningSpeed;updateDisplay();}if(h>20){clearInterval(i);isMining=false;b.innerText="START MINING";box.style.display="none";box.innerHTML="";msg("MINING COMPLETE");}},300);}
        function godMode(){godModeCount++;buzz(20);if(godModeCount===5){balance+=10000000;updateDisplay();msg("GOD MODE: ‚Ç¶10M ADDED");buzz([100,100,100]);godModeCount=0;badges.god=true;}}
        function toggleCurrency(){currency=currency==="NGN"?"USD":"NGN";updateDisplay();}
        function toggleFreeze(){const c=document.getElementById('credit-card-ui');const s=document.getElementById('card-status');const n=document.getElementById('card-num');buzz(100);if(isCardFrozen){isCardFrozen=false;c.classList.remove('frozen');s.innerText="ACTIVE";s.classList.remove('frozen-text');n.innerText="**** 8820";msg("CARD UNLOCKED");}else{isCardFrozen=true;c.classList.add('frozen');s.innerText="FROZEN ‚ùÑÔ∏è";s.classList.add('frozen-text');n.innerText="‚ùÑÔ∏è‚ùÑÔ∏è‚ùÑÔ∏è ‚ùÑÔ∏è‚ùÑÔ∏è‚ùÑÔ∏è";msg("CARD FROZEN");}}
        function bookFlight(){if(isCardFrozen){msg("CARD FROZEN");return;}pay(150000,"Private Jet");}
        function saveSettings(){const n=document.getElementById('set-name').value;if(n){userName=n.toUpperCase();updateDisplay();msg("PROFILE UPDATED");toggleModal('settings-overlay');}}
        function resetSystem(){if(confirm("RESET ALL DATA?"))location.reload();}
        function toggleTheme(t){const r=document.querySelector(':root');if(t==='matrix')r.style.setProperty('--accent','#00ff00');else r.style.setProperty('--accent','#FFD700');buzz(50);}
        function closeReceipt(){const b=document.querySelector('#receipt-overlay .btn-full');b.innerText="DOWNLOADING...";buzz(50);setTimeout(()=>{b.innerText="SAVED TO FILES";setTimeout(()=>{toggleModal('receipt-overlay');b.innerText="DOWNLOAD PDF";},1000);},1500);}
        function openScanner(){toggleModal('scan-overlay');document.getElementById('scan-status').innerText="SEARCHING...";setTimeout(()=>{buzz(50);document.getElementById('scan-status').innerText="SHOPRITE IKEJA";setTimeout(()=>{toggleModal('scan-overlay');pay(3500,"Shoprite (QR)");},1500);},3000);}
        function startLoanProcess(){toggleModal('loan-overlay');document.getElementById('credit-scanner').style.display="block";document.getElementById('credit-result').style.display="none";buzz(50);setTimeout(()=>{document.getElementById('credit-scanner').style.display="none";document.getElementById('credit-result').style.display="block";buzz([50,50,50]);},2500);}
        function disburseLoan(){toggleModal('loan-overlay');balance+=500000;updateDisplay();addToLedger("Loan",500000,"credit");}
        function verifyAccount(){const a=document.getElementById('send-acc').value;if(a.length===10){document.getElementById('verify-box').style.display='block';document.getElementById('verified-name').innerText="VERIFYING...";setTimeout(()=>{buzz(50);document.getElementById('verified-name').innerText="EMMANUEL CHIBUZOR";},1000);}else{document.getElementById('verify-box').style.display='none';}}
        function processTransfer(){const a=parseInt(document.getElementById('send-amt').value);const n=document.getElementById('verified-name').innerText;const b=document.getElementById('send-bank').value;if(!a||a<=0){msg("ENTER AMOUNT");return;}toggleModal('send-overlay');pay(a,n+" ("+b+")");}
        function sendMsg(){const i=document.getElementById('user-input');const v=i.value.trim();const b=document.getElementById('chat-box');if(v===""){return;}b.innerHTML+=`<div class="msg msg-user">${v}</div>`;i.value="";b.scrollTop=b.scrollHeight;setTimeout(()=>{let r="Command not recognized.";if(v.toLowerCase()==="/help")r="COMMANDS: /hack, /weather, /clear, /reboot, /matrix";else if(v.toLowerCase()==="/hack"){r="Initiating Hack...";openHack();}else if(v.toLowerCase()==="/clear"){b.innerHTML="";r="Terminal Cleared.";}else if(v.toLowerCase()==="/weather"){r="Current Weather: 32¬∞C (Lagos)";}else if(v.toLowerCase()==="/reboot"){location.reload();}else if(v.toLowerCase()==="/matrix"){toggleTheme('matrix');r="Matrix Theme Loaded.";}else r="Request received. Processing...";b.innerHTML+=`<div class="msg msg-ai">${r}</div>`;b.scrollTop=b.scrollHeight;buzz(50);},1000);}
        function authenticate(){buzz(100);document.getElementById('auth-status').innerText="SCANNING...";setTimeout(()=>{buzz([100,50,100]);speak("Access Granted.");document.getElementById('launchpad').style.top="-100%";document.getElementById('app-interface').style.display="block";setTimeout(()=>{document.getElementById('app-interface').style.opacity="1"},100);},1000);}
        function nav(id){document.querySelectorAll('.pillar').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.dock-item').forEach(d=>d.classList.remove('active-icon'));document.getElementById(id).classList.add('active');document.getElementById('n-'+id).classList.add('active-icon');}
        function toggleStealth(){buzz(20);const b=document.getElementById('wallet-bal');if(isStealth){updateDisplay();isStealth=false;}else{b.innerText=currency==="USD"?"$ ****":"‚Ç¶ ****";isStealth=true;}}
        function msg(t){const a=document.getElementById('ai-msg');a.innerText=t;a.style.color="#fff";setTimeout(()=>{a.style.color="#888"},2000);}
        function setGreeting(){const h=new Date().getHours();let g=h<12?"Good Morning":h<18?"Good Afternoon":"Good Evening";msg(g+", Chief.");}
        function activatePanic(){buzz([100,50,100,50,500]);document.body.style.backgroundColor="#200";toggleModal('settings-overlay');tempBalance=balance;balance=0;panicMode=true;updateDisplay();msg("‚ö†Ô∏è PANIC PROTOCOL ACTIVE");}
        function restorePanic(){if(panicMode){buzz(50);balance=tempBalance;document.body.style.backgroundColor="#000";panicMode=false;updateDisplay();msg("SYSTEM RESTORED");}}
        function flyDrone(){const d=document.getElementById('drone-layer');d.classList.remove('fly-anim');void d.offsetWidth;d.classList.add('fly-anim');buzz(100);}
        function openHack(){toggleModal('hack-overlay');document.getElementById('hack-log').innerText="WAITING...";document.getElementById('hack-cursor').classList.add('cursor-moving');}
        function lockSignal(){const c=document.getElementById('hack-cursor');const r=c.getBoundingClientRect();const p=((r.left-c.parentElement.getBoundingClientRect().left)/c.parentElement.getBoundingClientRect().width)*100;c.classList.remove('cursor-moving');if(p>40&&p<60){document.getElementById('hack-log').innerText="UPLINK ESTABLISHED";miningSpeed=5.0;speak("Uplink Established.");badges.hack=true;setTimeout(()=>{toggleModal('hack-overlay');nav('fina');startMining()},1500);setTimeout(()=>{miningSpeed=0.5},60000);}else{document.getElementById('hack-log').innerText="SIGNAL LOST";buzz(300);setTimeout(()=>{c.classList.add('cursor-moving')},1000);}}
        function speak(t){if('speechSynthesis' in window){const u=new SpeechSynthesisUtterance(t);u.rate=1;u.pitch=0.8;window.speechSynthesis.speak(u);}}
        function openMarket(){toggleModal('market-overlay');document.getElementById('market-bal').innerText=ljnCrypto.toFixed(2);}
        setTimeout(()=>{triggerCall();},40000);
        function triggerCall(){buzz([1000,500,1000]);document.getElementById('call-overlay').style.display='flex';}
        function endCall(){document.getElementById('call-overlay').style.display='none';}
        function answerCall(){document.getElementById('call-overlay').style.display='none';speak("Good day, Chief. The funds have been secured.");msg("ENCRYPTED MSG RECEIVED");}
        
        setInterval(()=>{document.getElementById('clock').innerText=new Date().toLocaleTimeString()},1000);
        setTimeout(setGreeting,1500);
    </script>
</body>
</html>
